#!/bin/sh
PATH_TO_ME=`dirname $0`;
if [ -z "$PLMAKE_PATH" ]; then
    PLMAKE_PATH=$PATH_TO_ME/../prolog;
fi

SWIPL=swipl
if [ -z `which swipl` ]; then
    # default locations on OS X
    SWIPL=/Applications/SWI-Prolog.app/Contents/MacOS/swipl;
    if [ -z $SWIPL ]; then
	SWIPL=/opt/local/bin/swipl;
    fi
fi

echo $SWIPL
echo $PLMAKE_PATH

$SWIPL -L0 -G0 -T0 -q -p library=$PLMAKE_PATH  -g main,halt -t halt -s $PLMAKE_PATH/plmake/plmake_cli -- "$@"
##swipl -g "use_module(library(plmake/plmake)),debug(build),consult_buildfile,build('$@')"
