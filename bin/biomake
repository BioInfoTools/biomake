#!/bin/sh
PATH_TO_ME=`dirname $0`;
if [ -z "$BIOMAKE_PATH" ]; then
    BIOMAKE_PATH=$PATH_TO_ME/../prolog;
fi

SWIPL=swipl
if [ -z `which swipl` ]; then
    # default locations on OS X
    SWIPL=/Applications/SWI-Prolog.app/Contents/MacOS/swipl;
    if [ ! -e $SWIPL ]; then
	SWIPL=/opt/local/bin/swipl;
    fi
    if [ ! -e $SWIPL ]; then
	echo Biomake requires SWI-Prolog. Please download from http://www.swi-prolog.org/
	exit 1
    fi
fi


$SWIPL -L0 -G0 -T0 -q -p library=$BIOMAKE_PATH  -g 'assert(biomake_prog("'$0'")),main,halt' -t halt -s $BIOMAKE_PATH/biomake/cli -- "$@"
